# ==========================================================
# ç¥¥æ˜“æŸ¥åƒ¹ç³»çµ± - æ ¸å¿ƒè¨­å®šæª” (2026-02-16 æœ€çµ‚ç©©å®šç‰ˆ)
# ==========================================================

# === 1. ä¼ºæœå™¨è¨­å®š ===
server.port=8080

# === 2. è³‡æ–™åº«é€£ç·šè¨­å®š (è§£æ±ºé€£ç·šè¶…æ™‚é—œéµ) ===
# åŠ å…¥ prepareThreshold=0 æ˜¯è§£æ±º Supabase Pooler (6543) æ¡æ‰‹å¤±æ•—çš„ç‰¹æ•ˆè—¥
# åŠ å…¥ tcpKeepAlive=true ç¢ºä¿å¤§æ•¸æ“šå‚³è¼¸æ™‚é€£ç·šä¸ä¸­æ–·
spring.datasource.url=jdbc:postgresql://aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres?sslmode=require&prepareThreshold=0&connectTimeout=30&socketTimeout=30&tcpKeepAlive=true
spring.datasource.username=postgres.txowvwqkruzamxaxzosc
spring.datasource.password=Eason052334090
spring.datasource.driver-class-name=org.postgresql.Driver

# === 3. ğŸ›¡ï¸ Hikari é€£ç·šæ± å„ªåŒ– (è·¨åœ‹é€£ç·šå¼·åŒ–) ===
# æ‹‰é«˜ connection-timeout åˆ° 60 ç§’ï¼Œçµ¦äºˆè·¨åœ‹ç¶²è·¯æ›´å¤šå¯¬å®¹åº¦
spring.datasource.hikari.connection-timeout=60000
# é™åˆ¶æœ€å¤§é€£ç·šæ•¸ï¼Œé¿å…æ“ çˆ† Supabase å…è²»ç‰ˆé™åˆ¶
spring.datasource.hikari.maximum-pool-size=4
spring.datasource.hikari.minimum-idle=2
# å•Ÿå‹•æ™‚å³ä½¿é€£ä¸åˆ°è³‡æ–™åº«ä¹Ÿå…ˆè·‘èµ·ä¾†ï¼Œé¿å… Render é‡è¤‡é‡å•Ÿå¤±æ•—
spring.datasource.hikari.initialization-fail-timeout=0
spring.datasource.hikari.validation-timeout=5000
spring.datasource.hikari.max-lifetime=600000

# === 4. JPA / Hibernate è¨­å®š (ä¸­æ–‡æ¬„ä½è‡ªå‹•å°é½Š) ===
# è¨­ç‚º update è®“ Hibernate è‡ªå‹•åœ¨è³‡æ–™åº«å»ºç«‹ã€Œå•†å“ä»£è™Ÿã€ã€ã€Œåç¨±ã€ç­‰ä¸­æ–‡æ¬„ä½
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
# è§£æ±º Open EntityManager in View è­¦å‘Š
spring.jpa.open-in-view=false
# é¡¯å¼æŒ‡å®š Dialectï¼Œé˜²æ­¢ Hibernate åˆ¤æ–·éŒ¯èª¤
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect

# === 5. æ‰¹æ¬¡è™•ç†å„ªåŒ– (ä¸‰è¬ç­† Excel å¿«é€ŸåŒ¯å…¥é—œéµ) ===
# é…åˆ ExcelController çš„ batchUpdate ä½¿ç”¨
spring.jpa.properties.hibernate.jdbc.batch_size=50
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true

# === 6. è¨˜éŒ„æª”è¨­å®š (é™¤éŒ¯ç”¨) ===
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE